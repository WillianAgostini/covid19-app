<ion-header translucent>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title *ngIf="mode == 'state'">Buscar Estado</ion-title>
    <ion-title *ngIf="mode == 'city'">Buscar Município</ion-title>
    <ion-buttons (click)="Sair()" slot="primary">
      <ion-button> Voltar </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div *ngIf="mode == 'city'">
    <ion-item>
      <ion-label>Estado</ion-label>
      <ion-select
        placeholder="Selecione um estado"
        okText="Ok"
        cancelText="Cancelar"
        (ionChange)="change($event.target.value)"
      >
        <ion-select-option *ngFor="let estado of estados" [value]="estado">{{
          estado.nome
        }}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-searchbar
      (ionChange)="SearchBarAlterado($event.target.value)"
      placeholder="Município"
      debounce="500"
      [disabled]="searchBarDesabilidado"
      animated
    ></ion-searchbar>
    <ion-progress-bar
      *ngIf="ibgeService.municipiosSearching$ | async"
      type="indeterminate"
    ></ion-progress-bar>
    <ion-list>
      <ion-item
        *ngFor="let municipio of municipiosFiltro"
        button
        (click)="AdicionarMunicipio(municipio)"
        >{{ municipio.nome }}</ion-item
      >
    </ion-list>
  </div>

  <div *ngIf="mode == 'state'">
    <ion-searchbar
      (ionChange)="SearchBarAlteradoEstado($event.target.value)"
      placeholder="Estado"
      debounce="500"
      animated
    ></ion-searchbar>

    <ion-list>
      <ion-item
        *ngFor="let estado of estadosFiltro"
        button
        (click)="AdicionarEstado(estado)"
        >{{ estado.nome }}</ion-item
      >
    </ion-list>
  </div>
</ion-content>
